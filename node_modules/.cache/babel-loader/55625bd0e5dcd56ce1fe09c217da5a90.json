{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodePubkey = exports.encodePubkey = void 0;\n/* eslint-disable @typescript-eslint/naming-convention */\n\nconst amino_1 = require(\"@cosmjs/amino\");\n\nconst encoding_1 = require(\"@cosmjs/encoding\");\n\nconst math_1 = require(\"@cosmjs/math\");\n\nconst keys_1 = require(\"cosmjs-types/cosmos/crypto/multisig/keys\");\n\nconst keys_2 = require(\"cosmjs-types/cosmos/crypto/secp256k1/keys\");\n\nconst any_1 = require(\"cosmjs-types/google/protobuf/any\");\n\nfunction encodePubkey(pubkey) {\n  if ((0, amino_1.isSecp256k1Pubkey)(pubkey)) {\n    const pubkeyProto = keys_2.PubKey.fromPartial({\n      key: (0, encoding_1.fromBase64)(pubkey.value)\n    });\n    return any_1.Any.fromPartial({\n      typeUrl: \"/cosmos.crypto.secp256k1.PubKey\",\n      value: Uint8Array.from(keys_2.PubKey.encode(pubkeyProto).finish())\n    });\n  } else if ((0, amino_1.isMultisigThresholdPubkey)(pubkey)) {\n    const pubkeyProto = keys_1.LegacyAminoPubKey.fromPartial({\n      threshold: math_1.Uint53.fromString(pubkey.value.threshold).toNumber(),\n      publicKeys: pubkey.value.pubkeys.map(encodePubkey)\n    });\n    return any_1.Any.fromPartial({\n      typeUrl: \"/cosmos.crypto.multisig.LegacyAminoPubKey\",\n      value: Uint8Array.from(keys_1.LegacyAminoPubKey.encode(pubkeyProto).finish())\n    });\n  } else {\n    throw new Error(`Pubkey type ${pubkey.type} not recognized`);\n  }\n}\n\nexports.encodePubkey = encodePubkey;\n\nfunction decodeSinglePubkey(pubkey) {\n  switch (pubkey.typeUrl) {\n    case \"/cosmos.crypto.secp256k1.PubKey\":\n      {\n        const {\n          key\n        } = keys_2.PubKey.decode(pubkey.value);\n        return (0, amino_1.encodeSecp256k1Pubkey)(key);\n      }\n\n    default:\n      throw new Error(`Pubkey type_url ${pubkey.typeUrl} not recognized as single public key type`);\n  }\n}\n\nfunction decodePubkey(pubkey) {\n  if (!pubkey || !pubkey.value) {\n    return null;\n  }\n\n  switch (pubkey.typeUrl) {\n    case \"/cosmos.crypto.secp256k1.PubKey\":\n      {\n        return decodeSinglePubkey(pubkey);\n      }\n\n    case \"/cosmos.crypto.multisig.LegacyAminoPubKey\":\n      {\n        const {\n          threshold,\n          publicKeys\n        } = keys_1.LegacyAminoPubKey.decode(pubkey.value);\n        const out = {\n          type: \"tendermint/PubKeyMultisigThreshold\",\n          value: {\n            threshold: threshold.toString(),\n            pubkeys: publicKeys.map(decodeSinglePubkey)\n          }\n        };\n        return out;\n      }\n\n    default:\n      throw new Error(`Pubkey type_url ${pubkey.typeUrl} not recognized`);\n  }\n}\n\nexports.decodePubkey = decodePubkey;","map":{"version":3,"mappings":";;;;;;AAAA;;AACA;;AAQA;;AACA;;AACA;;AACA;;AACA;;AAEA,SAAgBA,YAAhB,CAA6BC,MAA7B,EAA2C;EACzC,IAAI,+BAAkBA,MAAlB,CAAJ,EAA+B;IAC7B,MAAMC,WAAW,GAAGC,cAAOC,WAAP,CAAmB;MACrCC,GAAG,EAAE,2BAAWJ,MAAM,CAACK,KAAlB;IADgC,CAAnB,CAApB;IAGA,OAAOC,UAAIH,WAAJ,CAAgB;MACrBI,OAAO,EAAE,iCADY;MAErBF,KAAK,EAAEG,UAAU,CAACC,IAAX,CAAgBP,cAAOQ,MAAP,CAAcT,WAAd,EAA2BU,MAA3B,EAAhB;IAFc,CAAhB,CAAP;EAID,CARD,MAQO,IAAI,uCAA0BX,MAA1B,CAAJ,EAAuC;IAC5C,MAAMC,WAAW,GAAGW,yBAAkBT,WAAlB,CAA8B;MAChDU,SAAS,EAAEC,cAAOC,UAAP,CAAkBf,MAAM,CAACK,KAAP,CAAaQ,SAA/B,EAA0CG,QAA1C,EADqC;MAEhDC,UAAU,EAAEjB,MAAM,CAACK,KAAP,CAAaa,OAAb,CAAqBC,GAArB,CAAyBpB,YAAzB;IAFoC,CAA9B,CAApB;IAIA,OAAOO,UAAIH,WAAJ,CAAgB;MACrBI,OAAO,EAAE,2CADY;MAErBF,KAAK,EAAEG,UAAU,CAACC,IAAX,CAAgBG,yBAAkBF,MAAlB,CAAyBT,WAAzB,EAAsCU,MAAtC,EAAhB;IAFc,CAAhB,CAAP;EAID,CATM,MASA;IACL,MAAM,IAAIS,KAAJ,CAAU,eAAepB,MAAM,CAACqB,IAAI,iBAApC,CAAN;EACD;AACF;;AArBDC;;AAuBA,SAASC,kBAAT,CAA4BvB,MAA5B,EAAuC;EACrC,QAAQA,MAAM,CAACO,OAAf;IACE,KAAK,iCAAL;MAAwC;QACtC,MAAM;UAAEH;QAAF,IAAUF,cAAOsB,MAAP,CAAcxB,MAAM,CAACK,KAArB,CAAhB;QACA,OAAO,mCAAsBD,GAAtB,CAAP;MACD;;IACD;MACE,MAAM,IAAIgB,KAAJ,CAAU,mBAAmBpB,MAAM,CAACO,OAAO,2CAA3C,CAAN;EANJ;AAQD;;AAED,SAAgBkB,YAAhB,CAA6BzB,MAA7B,EAAgD;EAC9C,IAAI,CAACA,MAAD,IAAW,CAACA,MAAM,CAACK,KAAvB,EAA8B;IAC5B,OAAO,IAAP;EACD;;EAED,QAAQL,MAAM,CAACO,OAAf;IACE,KAAK,iCAAL;MAAwC;QACtC,OAAOgB,kBAAkB,CAACvB,MAAD,CAAzB;MACD;;IACD,KAAK,2CAAL;MAAkD;QAChD,MAAM;UAAEa,SAAF;UAAaI;QAAb,IAA4BL,yBAAkBY,MAAlB,CAAyBxB,MAAM,CAACK,KAAhC,CAAlC;QACA,MAAMqB,GAAG,GAA4B;UACnCL,IAAI,EAAE,oCAD6B;UAEnChB,KAAK,EAAE;YACLQ,SAAS,EAAEA,SAAS,CAACc,QAAV,EADN;YAELT,OAAO,EAAED,UAAU,CAACE,GAAX,CAAeI,kBAAf;UAFJ;QAF4B,CAArC;QAOA,OAAOG,GAAP;MACD;;IACD;MACE,MAAM,IAAIN,KAAJ,CAAU,mBAAmBpB,MAAM,CAACO,OAAO,iBAA3C,CAAN;EAhBJ;AAkBD;;AAvBDe","names":["encodePubkey","pubkey","pubkeyProto","keys_2","fromPartial","key","value","any_1","typeUrl","Uint8Array","from","encode","finish","keys_1","threshold","math_1","fromString","toNumber","publicKeys","pubkeys","map","Error","type","exports","decodeSinglePubkey","decode","decodePubkey","out","toString"],"sourceRoot":"","sources":["../src/pubkey.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}